# konflux-ci/paketo

This project contains the information used by [cachi2](containerbuildsystem), when executed part of the Konflux `prefetch-dependencies` [task](.tekton/build-pipeline.yaml)

```yaml
// .tekton/[paketo-container-push.yaml](.tekton/paketo-container-push.yaml)
  - name: prefetch-input
    value: |
     [{"type": "gomod", "path": "toml"},
      {"type": "gomod", "path": "jam"},
      {"type": "gomod", "path": "create-package"},
      {"type": "gomod", "path": "pack"},
      {"type": "rpm", "path": "."}]
```

to download the go dependencies (of the different git submodules) and which are next used during the build 
of the [Dockerfile](Containerfile) to generate the binary of the following applications 
- [pack](https://github.com/redhat-buildpacks/fork-pack), 
- [jam](https://github.com/redhat-buildpacks/fork-jam), 
- [create-package](https://github.com/redhat-buildpacks/fork-libpak), 
- [toml](https://github.com/pelletier/go-toml) lib

The RPMs which should also be installed to build the project or within the final image created top of a red hat ubi9 image
are listed part of the file [rpms.in.yaml](rpms.in.yaml). The urls of such rpms are populated using the [tool](https://github.com/konflux-ci/rpm-lockfile-prototype) within the lock file: [rpms.lock.yaml](rpms.lock.yaml) and their [ubi.repo](ubi.repo).

The image generated by konflux is available here: quay.io/redhat-user-workloads/cmoullia-tenant/paketo-container/paketo-container

# How to guide

This section details what you should do as developer to design a project able to create an image packaging the executable that you need
and that you will next use on konflux to build your own artefacts in a hermetic environment. You will then be able to replace the default `buildah` image with yours
within the task: `build-container`.






